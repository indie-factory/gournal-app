import{E as V}from"./md-editor-v3-CuJnIjn-.js";import{u as y}from"./vue-router-D_PqdZ1a.js";import{a as C,u as k}from"./GournalApi--yJEhZ-t.js";import{i as T}from"./index--NNOcRsa.js";import{a as E}from"./axios-Cm0UX6qg.js";import{l as U,E as z,F,v as g,x as I,A as L,g as N,w as f}from"./vuetify-CAJYPxUq.js";import{g as R,j as d,L as j,X as B,o as M,c as P,f as e,Z as l,z as u,F as S}from"./@vue-D1ftCoHK.js";import{_ as H}from"./activity-calendar-widget-Dzl68eJd.js";import"./@vavt-DtLj4T47.js";import"./@codemirror-CHsz4VGU.js";import"./@lezer-x_sHd3sj.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./medium-zoom-CHfgT04g.js";import"./copy-to-clipboard-gvHgSpPc.js";import"./toggle-selection-BHUZwh74.js";import"./markdown-it-DI8MEbma.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-kMc2yuuw.js";import"./entities-C20TfXL6.js";import"./linkify-it-DmNjr4Kv.js";import"./punycode.js-Dj65hjkv.js";import"./markdown-it-image-figures-BD49Kf-b.js";import"./markdown-it-task-lists-DKHOi6r0.js";import"./markdown-it-xss-CzKvBubu.js";import"./xss-DnjGkJ2-.js";import"./cssfilter-BjxKUPhv.js";import"./lru-cache-DBLXwll_.js";/* empty css             */import"./@date-io-B1xM1e2q.js";import"./dayjs-T8SworZD.js";const O=async m=>{const p={fileName:m.name},o=await T.post("/images/presigned-url",p),a=new URL(o.url);return E.put(a.toString(),m,{headers:{"Content-Type":m.type,"x-amz-acl":"public-read"}}).then(()=>a.pathname)},q=R({__name:"Editor",setup(m){const p=y(),o=d({}),a=d(""),h=j(U().global.current.value),n=d(!0),i=d(!1);let v=null;B(()=>{C(Number(p.currentRoute.value.params.id)).then(t=>{o.value=t,a.value=t.text??""})});function c(){n.value||k({id:o.value.id,text:a.value}).then(t=>{n.value=!0,o.value=t})}function x(){c(),p.replace("/pages")}function b(t){a.value=t,n.value=!1,clearTimeout(v),v=setTimeout(c,1e3*.5)}async function w(t,r){i.value=!0,O(t[0]).then(s=>{r(["https://sgp1.vultrobjects.com/gournal"+s]),i.value=!1}).finally(()=>{i.value=!1})}function _(){window.open(o.value.url,"_blank")}return(t,r)=>(M(),P(S,null,[e(F,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=s=>i.value=s),class:"d-flex justify-center align-center"},{default:l(()=>[e(z,{size:100,width:10,color:"info",indeterminate:""})]),_:1},8,["modelValue"]),e(u(f),{color:n.value?"info":"warning",class:"mb-10 pl-10",variant:"text",onClick:c,location:"bottom start",app:""},{default:l(()=>[e(g,{size:"36",icon:n.value?"mdi-content-save-check":"mdi-content-save-edit"},null,8,["icon"])]),_:1},8,["color"]),e(u(f),{color:"info",class:"mb-10 pr-10",variant:"text",location:"bottom end",onClick:x,style:{bottom:"0"},app:""},{default:l(()=>[e(g,{size:"36",icon:"mdi-arrow-left-circle"})]),_:1}),e(u(f),{class:"mb-10",variant:"elevated",color:"info","min-width":"350","min-height":"100",disabled:"",location:"bottom center",style:{bottom:"0"},app:""},{default:l(()=>[e(I,{class:"text-none text-left","min-height":"100","min-width":"350","max-height":"100","max-width":"350",title:o.value.repositoryName,onClick:_,"prepend-icon":"mdi-github",variant:"text"},{default:l(()=>[e(L,{innerHTML:o.value.message,class:"text-truncate"},null,8,["innerHTML"])]),_:1},8,["title"])]),_:1}),e(N,null,{default:l(()=>[e(u(V),{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=s=>a.value=s),language:"en-US","preview-theme":"github",theme:u(h).dark?"dark":"light","on-save":c,"toolbars-exclude":["sub","sup","mermaid","katex","save","pageFullscreen","preview","htmlPreview","catalog","github","prettier"],footers:[],"page-fullscreen":!0,class:"h-screen position-relative x-index-0",onChange:b,onOnUploadImg:w},null,8,["modelValue","theme"])]),_:1})],64))}}),_e=H(q,[["__scopeId","data-v-b5b94f85"]]);export{_e as default};
