import{E as _}from"./md-editor-v3-DhqNypPU.js";import{u as V}from"./vue-router-DNPgXL5n.js";import{a as y,u as C}from"./GournalApi-Dy8gFjh9.js";import{i as k}from"./index-DlpPnHNi.js";import{a as T}from"./axios-Cm0UX6qg.js";import{l as E,D as U,E as N,v,x as z,A as B,g as F,w as f}from"./vuetify-D23KgkyU.js";import{d as I,a as d,B as R,N as S,Q as L,V as M,c as e,S as n,u,F as P}from"./@vue-D0ThA3Gb.js";import{_ as j}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./@vavt-B4fzJ49s.js";import"./@codemirror-CRBqiWim.js";import"./@lezer-CEkmkKm7.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./medium-zoom-CHfgT04g.js";import"./copy-to-clipboard-gvHgSpPc.js";import"./toggle-selection-BHUZwh74.js";import"./markdown-it-DI8MEbma.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-kMc2yuuw.js";import"./entities-C20TfXL6.js";import"./linkify-it-DmNjr4Kv.js";import"./punycode.js-Dj65hjkv.js";import"./markdown-it-image-figures-BD49Kf-b.js";import"./markdown-it-task-lists-DKHOi6r0.js";import"./markdown-it-xss-CzKvBubu.js";import"./xss-DnjGkJ2-.js";import"./cssfilter-BjxKUPhv.js";import"./lru-cache-DBLXwll_.js";/* empty css             */import"./@date-io-B1xM1e2q.js";import"./dayjs-T8SworZD.js";const H=async m=>{const p={fileName:m.name},a=await k.post("/images/presigned-url",p),o=new URL(a.url);return T.put(o.toString(),m,{headers:{"Content-Type":m.type,"x-amz-acl":"public-read"}}).then(()=>o.pathname)},O=I({__name:"Editor",setup(m){const p=V(),a=d({}),o=d(""),g=R(E().global.current.value),l=d(!0),i=d(!1);S(()=>{y(Number(p.currentRoute.value.params.id)).then(t=>{a.value=t,o.value=t.text??""})});function c(){l.value||C({id:a.value.id,text:o.value}).then(t=>{l.value=!0,a.value=t})}function h(){c(),p.replace("/pages")}function x(t){o.value=t,l.value=!1,setTimeout(()=>{c()},1e3*3)}async function b(t,r){i.value=!0,H(t[0]).then(s=>{r(["https://sgp1.vultrobjects.com/gournal"+s]),i.value=!1}).finally(()=>{i.value=!1})}function w(){window.open(a.value.url,"_blank")}return(t,r)=>(L(),M(P,null,[e(N,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=s=>i.value=s),class:"d-flex justify-center align-center"},{default:n(()=>[e(U,{size:100,width:10,color:"info",indeterminate:""})]),_:1},8,["modelValue"]),e(u(f),{color:l.value?"info":"warning",class:"mb-10 pl-10",variant:"text",onClick:c,location:"bottom start",app:""},{default:n(()=>[e(v,{size:"36",icon:l.value?"mdi-content-save-check":"mdi-content-save-edit"},null,8,["icon"])]),_:1},8,["color"]),e(u(f),{color:"info",class:"mb-10 pr-10",variant:"text",location:"bottom end",onClick:h,style:{bottom:"0"},app:""},{default:n(()=>[e(v,{size:"36",icon:"mdi-arrow-left-circle"})]),_:1}),e(u(f),{class:"mb-10",variant:"elevated",color:"info","min-width":"350","min-height":"100",disabled:"",location:"bottom center",style:{bottom:"0"},app:""},{default:n(()=>[e(z,{class:"text-none text-left","min-height":"100","min-width":"350","max-height":"100","max-width":"350",title:a.value.repositoryName,onClick:w,"prepend-icon":"mdi-github",variant:"text"},{default:n(()=>[e(B,{innerHTML:a.value.message,class:"text-truncate"},null,8,["innerHTML"])]),_:1},8,["title"])]),_:1}),e(F,null,{default:n(()=>[e(u(_),{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=s=>o.value=s),language:"en-US","preview-theme":"github",theme:u(g).dark?"dark":"light","on-save":c,"toolbars-exclude":["sub","sup","mermaid","katex","save","pageFullscreen","preview","htmlPreview","catalog","github","prettier"],footers:[],"page-fullscreen":!0,class:"h-screen position-relative x-index-0",onChange:x,onOnUploadImg:b},null,8,["modelValue","theme"])]),_:1})],64))}}),be=j(O,[["__scopeId","data-v-202bff05"]]);export{be as default};
