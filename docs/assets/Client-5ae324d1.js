import{P as H,a as Q,T as W,b as Z,S as z,j as G,M as R,c as K,l as X,n as Y,k as x,h as ee,i as te,d as ae}from"./ProgramStatusCombobox-b7c7027e.js";import{S as oe,E as se,P as le,V as ne,a as re}from"./VTable-effef9c8.js";import{d as ie,Z as I,N as r,f as ue,j as de,r as f,o as h,$ as N,a,w as o,c as C,V as A,a2 as j,a3 as y,a0 as b,W as M,b as l,R as F,a1 as me,aj as ce,e as pe,ak as fe}from"./index-f320d07b.js";import{P as he}from"./PrepareProgramModal-d7298486.js";import{E as be}from"./ExerciseTemplateModal-0ae598c6.js";import{_ as ge,a as J,f as ve,e as O,b as L,c as Pe,d as Se,V as Ce}from"./index-d59e3ac5.js";import{V as Ee}from"./VPagination-d57b32b1.js";import"./VTextField-bdf6a346.js";import"./VToolbar-d997f552.js";/* empty css              */import"./NumberValidation-958a7be6.js";import"./VCheckboxBtn-a402a366.js";const Ve=ie({name:"Client",components:{ProgramStatusCombobox:H,MemberProfile:Q,TruncateTextField:W,ProgramStatusField:Z,ExerciseTemplateModal:be,PrepareProgramModal:he,SearchClientAutocomplete:z,SearchTextField:oe,EditButton:se,PlusButton:le,ProgramModal:G},data:()=>({MembershipStatus:R,ProgramStatus:K,ProgramStatues:X}),methods:{showEditButton:function(e){return e.status=="PREPARE"||e.status=="REQUEST"}},setup(){const e=I.currentRoute.value.params.id;e||I.replace("/clients");const n=Number(e),d=r(),_=r([]),m=r(ae()),D=r(),g=r(""),E=r(!1),P=r(!1),S=r(),c=r(!1),{t:w}=ue(),i=(s=1,p)=>{var $;m.value.page=s-1,m.value.programName=(($=g.value)==null?void 0:$.trim())??void 0,m.value.clientId=n,m.value.statues=p??void 0,x(m.value).then(k=>{var T,B;k.success&&(T=k.result)!=null&&T.content&&(_.value=(B=k.result)==null?void 0:B.content,D.value=k.result)})},t=s=>{i(1,s)},u=s=>{g.value!=s&&(g.value=s,i())},v=s=>{P.value=!0,S.value=s},V=()=>{P.value=!1,S.value=void 0,i()},q=s=>{c.value=!0,s==R.APPROVED?ee(d.value.id).then(p=>{p.success&&(d.value=p.result),c.value=!1}).finally(()=>{c.value=!1}):s==R.REJECTED&&te(d.value.id).then(p=>{p.success&&(d.value=p.result)}).finally(()=>{c.value=!1})},U=()=>{E.value=!1,i()};return de(()=>{Y(n).then(s=>{s.success&&(d.value=s.result,i())})}),{openEditDialog:v,closeModal:V,request:m,programs:_,prepareDialog:E,programDialog:P,programId:S,searchPage:i,pagination:D,keywordSearch:u,closePrepareModal:U,keyword:g,membership:d,selectProgramStatus:t,loading:c,changeMembershipStatus:q,t:w}}}),ke={class:"pr-3"},ye={class:"text-subtitle-1 font-weight-bold"},Me={class:"text-subtitle-1 font-weight-bold"},_e={class:"text-subtitle-1 font-weight-bold"},De=["onClick"],we={class:"text-subtitle-1 font-weight-bold"},Re={class:"text-body-1 text-muted"};function $e(e,n,d,_,m,D){const g=f("plus-button"),E=f("prepare-program-modal"),P=f("search-text-field"),S=f("program-status-combobox"),c=f("program-status-field"),w=f("truncate-text-field"),i=f("program-modal");return h(),N(F,null,[a(Ce,null,{default:o(()=>[a(J,{cols:"12"},{default:o(()=>{var t,u,v;return[(t=e.membership)!=null&&t.member?(h(),C(O,{key:0,loading:e.loading,title:(u=e.membership)==null?void 0:u.member.nickName,subtitle:(v=e.membership)==null?void 0:v.member.email,elevation:"10",class:"pa-6"},{default:o(()=>[a(ve,null,{default:o(()=>[a(A,{variant:"outlined",color:e.membership.membershipStatus==e.MembershipStatus.APPROVED?"third":"",onClick:n[0]||(n[0]=V=>e.changeMembershipStatus(e.MembershipStatus.APPROVED))},{default:o(()=>[a(j,null,{default:o(()=>[y("mdi-check-circle-outline")]),_:1}),y(" "+b(e.MembershipStatus.APPROVED),1)]),_:1},8,["color"]),a(A,{variant:"outlined",color:e.membership.membershipStatus==e.MembershipStatus.REJECTED?"third":"",onClick:n[1]||(n[1]=V=>e.changeMembershipStatus(e.MembershipStatus.REJECTED))},{default:o(()=>[a(j,null,{default:o(()=>[y("mdi-close-circle-outline")]),_:1}),y(" "+b(e.MembershipStatus.REJECTED),1)]),_:1},8,["color"])]),_:1})]),_:1},8,["loading","title","subtitle"])):M("",!0)]}),_:1}),a(J,{cols:"12"},{default:o(()=>[a(O,{loading:e.loading,elevation:"10",class:"pa-6"},{default:o(()=>[a(L,null,{default:o(()=>[a(Pe,{class:"text-h5 pt-sm-2 pb-7"},{default:o(()=>{var t;return[l("span",ke,b(e.t("$vuetify.common.programs")),1),a(g,{onClick:n[2]||(n[2]=u=>e.prepareDialog=!0)}),e.prepareDialog?(h(),C(E,{key:0,dialog:e.prepareDialog,client:(t=e.membership)==null?void 0:t.member,onClose:e.closePrepareModal},null,8,["dialog","client","onClose"])):M("",!0)]}),_:1}),a(Se,null,{default:o(()=>[a(P,{label:e.t("$vuetify.common.programName"),keyword:e.keyword,onSearch:e.keywordSearch},null,8,["label","keyword","onSearch"]),a(S,{onSelect:e.selectProgramStatus},null,8,["onSelect"])]),_:1}),a(ne,null,{default:o(()=>[l("thead",null,[l("tr",null,[l("th",ye,b(e.t("$vuetify.common.status")),1),l("th",Me,b(e.t("$vuetify.common.name")),1),l("th",_e,b(e.t("$vuetify.common.description")),1)])]),l("tbody",null,[(h(!0),N(F,null,me(e.programs,t=>(h(),C(re,{key:t.id},{default:o(({isHovering:u,props:v})=>[ce(l("tr",pe({onClick:V=>e.openEditDialog(t.id)},v,{class:u?"clickable-hover":""}),[l("td",null,[a(c,{status:t.status},null,8,["status"])]),l("td",null,[l("h6",we,b(t==null?void 0:t.name),1)]),l("td",null,[l("h6",Re,[t!=null&&t.description?(h(),C(w,{key:0,text:t==null?void 0:t.description,length:40},null,8,["text"])):M("",!0)])])],16,De),[[fe,e.showEditButton(t)]])]),_:2},1024))),128))])]),_:1})]),_:1}),a(L,null,{default:o(()=>{var t;return[a(Ee,{length:(t=e.pagination)==null?void 0:t.totalPages,"total-visible":"5","onUpdate:modelValue":n[3]||(n[3]=u=>e.searchPage(1))},null,8,["length"])]}),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),e.programDialog?(h(),C(i,{key:0,dialog:e.programDialog,programId:e.programId,onClose:e.closeModal},null,8,["dialog","programId","onClose"])):M("",!0)],64)}const He=ge(Ve,[["render",$e]]);export{He as default};
