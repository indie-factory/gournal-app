import{s as C,r as $,g as k}from"./MemberApi-fa80c5dd.js";import{d as S,N as r,f as P,a7 as M,Z as w,M as E,a8 as N,r as b,o as T,c as h,w as t,a,_ as x,a4 as B,b as f,a0 as p,a9 as L,V,a3 as R}from"./index-f320d07b.js";import{_ as U}from"./RouteSpan.vue_vue_type_script_setup_true_lang-ea62f21f.js";import{e as A,p as F,V as K,a as I}from"./VTextField-bdf6a346.js";import{L as j}from"./Logo2-1754ce9b.js";import{_ as D,e as O,b as _,V as q,a as i}from"./index-d59e3ac5.js";/* empty css              */const z=S({name:"SignIn",components:{Logo2:j,RouteSpan:U},data:e=>({emailRules:A(e.t),passwordRules:F(e.t)}),setup(){const e=r(!1),s=r(k()),u=r(!1),d=r(),{t:m}=P(),n=r(!1);return{requestSignIn:async()=>{const{valid:l}=await d.value.validate();l&&(n.value=!0,C(s.value).then(o=>{var v,y;o.success?o.result&&(M(o.result),w.replace(((v=o.result)==null?void 0:v.currentType)===E.COACH?"/clients":"/coaches")):(N(),((y=o==null?void 0:o.error)==null?void 0:y.type)==="EMAIL_VERIFICATION_REQUIRED"&&w.push(`/member/approve-email?email=${s.value.email}`))}).finally(()=>{n.value=!1}))},snackbar:u,requestPasswordReset:()=>{const l=confirm(m("$vuetify.signin.resetPassword"));n.value=!0,l&&$({email:s.value.email}).then(o=>{o.success&&(u.value=!0)}).finally(()=>{n.value=!1})},request:s,isRemember:e,formRefs:d,t:m,loading:n}}}),H={class:"d-flex flex-wrap align-center"};function Q(e,s,u,d,m,n){const c=b("logo2"),g=b("route-span");return T(),h(q,{class:"h-100vh d-flex justify-center align-center"},{default:t(()=>[a(i,{cols:"12",lg:"4",xl:"3",class:"d-flex align-center"},{default:t(()=>[a(O,{rounded:"md",loading:e.loading,elevation:"10",class:"px-sm-1 px-0 withbg mx-auto","max-width":"500"},{default:t(()=>[a(_,{class:"pa-sm-8"},{default:t(()=>[a(c,{class:"text-body-1 text-muted text-center mb-3"}),a(K,{ref:"formRefs",onSubmit:s[5]||(s[5]=x(()=>{},["prevent"]))},{default:t(()=>[a(q,{class:"d-flex mb-3"},{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[a(I,{variant:"outlined",color:"secondary",label:e.t("$vuetify.common.email"),rules:e.emailRules,modelValue:e.request.email,"onUpdate:modelValue":s[0]||(s[0]=l=>e.request.email=l)},null,8,["label","rules","modelValue"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(I,{variant:"outlined",type:"password",label:e.t("$vuetify.signin.password"),color:"secondary",name:"current-password",modelValue:e.request.password,"onUpdate:modelValue":s[1]||(s[1]=l=>e.request.password=l),rules:e.passwordRules,onKeyup:B(e.requestSignIn,["enter"])},null,8,["label","modelValue","rules","onKeyup"])]),_:1}),a(i,{cols:"12",class:"pt-0"},{default:t(()=>[f("div",H,[f("span",{style:{cursor:"pointer"},onClick:s[2]||(s[2]=(...l)=>e.requestPasswordReset&&e.requestPasswordReset(...l))},p(e.t("$vuetify.signin.forgetPassword")),1)]),a(L,{modelValue:e.snackbar,"onUpdate:modelValue":s[4]||(s[4]=l=>e.snackbar=l)},{actions:t(()=>[a(V,{color:"secondary",variant:"text",loading:e.loading,onClick:s[3]||(s[3]=l=>e.snackbar=!1)},{default:t(()=>[R(" Close ")]),_:1},8,["loading"])]),default:t(()=>[f("span",null,p(e.t("$vuetify.signin.checkYourEmail")),1)]),_:1},8,["modelValue"])]),_:1}),a(i,{cols:"12",class:"pt-0"},{default:t(()=>[a(V,{type:"submit",onClick:e.requestSignIn,color:"secondary",size:"large",block:"",flat:""},{default:t(()=>[R(p(e.t("$vuetify.signin.signin")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),a(g,{to:"/member/signup",text:e.t("$vuetify.signup.signup"),class:"text-h6 text-muted font-weight-medium d-flex justify-center align-center mt-3"},null,8,["text"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})}const se=D(z,[["render",Q]]);export{se as default};
